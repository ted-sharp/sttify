<Window x:Class="Sttify.Views.ControlWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Sttify Control"
        Width="60" Height="60"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        Topmost="True"
        ResizeMode="NoResize"
        ShowInTaskbar="False">
    
    <Window.Resources>
            <!-- Animation Resources -->
            <Storyboard x:Key="FlipInAnimation">
                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="CircleScaleTransform" Storyboard.TargetProperty="ScaleX">
                    <EasingDoubleKeyFrame KeyTime="0:0:0" Value="1"/>
                    <EasingDoubleKeyFrame KeyTime="0:0:0.15" Value="0">
                        <EasingDoubleKeyFrame.EasingFunction>
                            <QuadraticEase EasingMode="EaseIn"/>
                        </EasingDoubleKeyFrame.EasingFunction>
                    </EasingDoubleKeyFrame>
                    <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="1">
                        <EasingDoubleKeyFrame.EasingFunction>
                            <QuadraticEase EasingMode="EaseOut"/>
                        </EasingDoubleKeyFrame.EasingFunction>
                    </EasingDoubleKeyFrame>
                </DoubleAnimationUsingKeyFrames>
                
                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="IconScaleTransform" Storyboard.TargetProperty="ScaleX">
                    <EasingDoubleKeyFrame KeyTime="0:0:0" Value="1"/>
                    <EasingDoubleKeyFrame KeyTime="0:0:0.15" Value="0">
                        <EasingDoubleKeyFrame.EasingFunction>
                            <QuadraticEase EasingMode="EaseIn"/>
                        </EasingDoubleKeyFrame.EasingFunction>
                    </EasingDoubleKeyFrame>
                    <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="1">
                        <EasingDoubleKeyFrame.EasingFunction>
                            <QuadraticEase EasingMode="EaseOut"/>
                        </EasingDoubleKeyFrame.EasingFunction>
                    </EasingDoubleKeyFrame>
                </DoubleAnimationUsingKeyFrames>
                
                <ColorAnimation Storyboard.TargetName="MicrophoneCircle" 
                               Storyboard.TargetProperty="Fill.Color"
                               Duration="0:0:0.3">
                    <ColorAnimation.EasingFunction>
                        <QuadraticEase EasingMode="EaseOut"/>
                    </ColorAnimation.EasingFunction>
                </ColorAnimation>
            </Storyboard>
            
            <Storyboard x:Key="PulseAnimation" RepeatBehavior="Forever">
                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="CircleScaleTransform" Storyboard.TargetProperty="ScaleY">
                    <EasingDoubleKeyFrame KeyTime="0:0:0" Value="1"/>
                    <EasingDoubleKeyFrame KeyTime="0:0:0.8" Value="1.05">
                        <EasingDoubleKeyFrame.EasingFunction>
                            <SineEase EasingMode="EaseInOut"/>
                        </EasingDoubleKeyFrame.EasingFunction>
                    </EasingDoubleKeyFrame>
                    <EasingDoubleKeyFrame KeyTime="0:0:1.6" Value="1">
                        <EasingDoubleKeyFrame.EasingFunction>
                            <SineEase EasingMode="EaseInOut"/>
                        </EasingDoubleKeyFrame.EasingFunction>
                    </EasingDoubleKeyFrame>
                </DoubleAnimationUsingKeyFrames>
                
                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="CircleScaleTransform" Storyboard.TargetProperty="ScaleX">
                    <EasingDoubleKeyFrame KeyTime="0:0:0" Value="1"/>
                    <EasingDoubleKeyFrame KeyTime="0:0:0.8" Value="1.05">
                        <EasingDoubleKeyFrame.EasingFunction>
                            <SineEase EasingMode="EaseInOut"/>
                        </EasingDoubleKeyFrame.EasingFunction>
                    </EasingDoubleKeyFrame>
                    <EasingDoubleKeyFrame KeyTime="0:0:1.6" Value="1">
                        <EasingDoubleKeyFrame.EasingFunction>
                            <SineEase EasingMode="EaseInOut"/>
                        </EasingDoubleKeyFrame.EasingFunction>
                    </EasingDoubleKeyFrame>
                </DoubleAnimationUsingKeyFrames>
            </Storyboard>
            
            <!-- Hover Animation -->
            <Storyboard x:Key="HoverInAnimation">
                <DoubleAnimation Storyboard.TargetName="CircleScaleTransform" 
                               Storyboard.TargetProperty="ScaleX"
                               To="1.05" Duration="0:0:0.2">
                    <DoubleAnimation.EasingFunction>
                        <QuadraticEase EasingMode="EaseOut"/>
                    </DoubleAnimation.EasingFunction>
                </DoubleAnimation>
                <DoubleAnimation Storyboard.TargetName="CircleScaleTransform" 
                               Storyboard.TargetProperty="ScaleY"
                               To="1.05" Duration="0:0:0.2">
                    <DoubleAnimation.EasingFunction>
                        <QuadraticEase EasingMode="EaseOut"/>
                    </DoubleAnimation.EasingFunction>
                </DoubleAnimation>
                <DoubleAnimation Storyboard.TargetName="MicrophoneCircle" 
                               Storyboard.TargetProperty="Effect.BlurRadius"
                               To="8" Duration="0:0:0.2">
                    <DoubleAnimation.EasingFunction>
                        <QuadraticEase EasingMode="EaseOut"/>
                    </DoubleAnimation.EasingFunction>
                </DoubleAnimation>
            </Storyboard>
            
            <Storyboard x:Key="HoverOutAnimation">
                <DoubleAnimation Storyboard.TargetName="CircleScaleTransform" 
                               Storyboard.TargetProperty="ScaleX"
                               To="1" Duration="0:0:0.2">
                    <DoubleAnimation.EasingFunction>
                        <QuadraticEase EasingMode="EaseOut"/>
                    </DoubleAnimation.EasingFunction>
                </DoubleAnimation>
                <DoubleAnimation Storyboard.TargetName="CircleScaleTransform" 
                               Storyboard.TargetProperty="ScaleY"
                               To="1" Duration="0:0:0.2">
                    <DoubleAnimation.EasingFunction>
                        <QuadraticEase EasingMode="EaseOut"/>
                    </DoubleAnimation.EasingFunction>
                </DoubleAnimation>
                <DoubleAnimation Storyboard.TargetName="MicrophoneCircle" 
                               Storyboard.TargetProperty="Effect.BlurRadius"
                               To="5" Duration="0:0:0.2">
                    <DoubleAnimation.EasingFunction>
                        <QuadraticEase EasingMode="EaseOut"/>
                    </DoubleAnimation.EasingFunction>
                </DoubleAnimation>
            </Storyboard>
            
            <!-- Click Animation -->
            <Storyboard x:Key="ClickAnimation">
                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="CircleScaleTransform" Storyboard.TargetProperty="ScaleX">
                    <EasingDoubleKeyFrame KeyTime="0:0:0" Value="1.05"/>
                    <EasingDoubleKeyFrame KeyTime="0:0:0.05" Value="0.95">
                        <EasingDoubleKeyFrame.EasingFunction>
                            <QuadraticEase EasingMode="EaseIn"/>
                        </EasingDoubleKeyFrame.EasingFunction>
                    </EasingDoubleKeyFrame>
                    <EasingDoubleKeyFrame KeyTime="0:0:0.2" Value="1.05">
                        <EasingDoubleKeyFrame.EasingFunction>
                            <ElasticEase EasingMode="EaseOut" Oscillations="1" Springiness="3"/>
                        </EasingDoubleKeyFrame.EasingFunction>
                    </EasingDoubleKeyFrame>
                </DoubleAnimationUsingKeyFrames>
                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="CircleScaleTransform" Storyboard.TargetProperty="ScaleY">
                    <EasingDoubleKeyFrame KeyTime="0:0:0" Value="1.05"/>
                    <EasingDoubleKeyFrame KeyTime="0:0:0.05" Value="0.95">
                        <EasingDoubleKeyFrame.EasingFunction>
                            <QuadraticEase EasingMode="EaseIn"/>
                        </EasingDoubleKeyFrame.EasingFunction>
                    </EasingDoubleKeyFrame>
                    <EasingDoubleKeyFrame KeyTime="0:0:0.2" Value="1.05">
                        <EasingDoubleKeyFrame.EasingFunction>
                            <ElasticEase EasingMode="EaseOut" Oscillations="1" Springiness="3"/>
                        </EasingDoubleKeyFrame.EasingFunction>
                    </EasingDoubleKeyFrame>
                </DoubleAnimationUsingKeyFrames>
            </Storyboard>
            
            <!-- Audio Level Animation -->
            <Storyboard x:Key="AudioLevelAnimation" RepeatBehavior="Forever">
                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="AudioRingScaleTransform" Storyboard.TargetProperty="ScaleX">
                    <EasingDoubleKeyFrame KeyTime="0:0:0" Value="1"/>
                    <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="1.1">
                        <EasingDoubleKeyFrame.EasingFunction>
                            <SineEase EasingMode="EaseInOut"/>
                        </EasingDoubleKeyFrame.EasingFunction>
                    </EasingDoubleKeyFrame>
                    <EasingDoubleKeyFrame KeyTime="0:0:0.6" Value="1">
                        <EasingDoubleKeyFrame.EasingFunction>
                            <SineEase EasingMode="EaseInOut"/>
                        </EasingDoubleKeyFrame.EasingFunction>
                    </EasingDoubleKeyFrame>
                </DoubleAnimationUsingKeyFrames>
                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="AudioRingScaleTransform" Storyboard.TargetProperty="ScaleY">
                    <EasingDoubleKeyFrame KeyTime="0:0:0" Value="1"/>
                    <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="1.1">
                        <EasingDoubleKeyFrame.EasingFunction>
                            <SineEase EasingMode="EaseInOut"/>
                        </EasingDoubleKeyFrame.EasingFunction>
                    </EasingDoubleKeyFrame>
                    <EasingDoubleKeyFrame KeyTime="0:0:0.6" Value="1">
                        <EasingDoubleKeyFrame.EasingFunction>
                            <SineEase EasingMode="EaseInOut"/>
                        </EasingDoubleKeyFrame.EasingFunction>
                    </EasingDoubleKeyFrame>
                </DoubleAnimationUsingKeyFrames>
                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="AudioRing" Storyboard.TargetProperty="Opacity">
                    <EasingDoubleKeyFrame KeyTime="0:0:0" Value="0.8"/>
                    <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="0.3">
                        <EasingDoubleKeyFrame.EasingFunction>
                            <SineEase EasingMode="EaseInOut"/>
                        </EasingDoubleKeyFrame.EasingFunction>
                    </EasingDoubleKeyFrame>
                    <EasingDoubleKeyFrame KeyTime="0:0:0.6" Value="0.8">
                        <EasingDoubleKeyFrame.EasingFunction>
                            <SineEase EasingMode="EaseInOut"/>
                        </EasingDoubleKeyFrame.EasingFunction>
                    </EasingDoubleKeyFrame>
                </DoubleAnimationUsingKeyFrames>
            </Storyboard>
            
            <!-- Processing Spin Animation -->
            <Storyboard x:Key="ProcessingAnimation" RepeatBehavior="Forever">
                <DoubleAnimation Storyboard.TargetName="IconRotateTransform" 
                               Storyboard.TargetProperty="Angle"
                               From="0" To="360" Duration="0:0:2">
                    <DoubleAnimation.EasingFunction>
                        <QuadraticEase EasingMode="EaseInOut"/>
                    </DoubleAnimation.EasingFunction>
                </DoubleAnimation>
            </Storyboard>
    </Window.Resources>
    
    <Grid>
        <!-- Audio Level Ring -->
        <Ellipse Width="54" Height="54" 
                 Fill="Transparent" 
                 Stroke="#FF4CAF50" 
                 StrokeThickness="1"
                 x:Name="AudioRing"
                 RenderTransformOrigin="0.5,0.5"
                 Opacity="0"
                 IsHitTestVisible="False">
            <Ellipse.RenderTransform>
                <ScaleTransform x:Name="AudioRingScaleTransform"/>
            </Ellipse.RenderTransform>
        </Ellipse>
        
        <Ellipse Width="50" Height="50" 
                 Fill="#FF4CAF50" 
                 Stroke="#FF2E7D32" 
                 StrokeThickness="2"
                 x:Name="MicrophoneCircle"
                 MouseRightButtonDown="OnMicrophoneRightClick"
                 MouseEnter="OnMicrophoneMouseEnter"
                 MouseLeave="OnMicrophoneMouseLeave"
                 RenderTransformOrigin="0.5,0.5"
                 Cursor="Hand">
            <Ellipse.RenderTransform>
                <ScaleTransform x:Name="CircleScaleTransform"/>
            </Ellipse.RenderTransform>
            <Ellipse.Effect>
                <DropShadowEffect Color="Black" BlurRadius="5" Opacity="0.2"/>
            </Ellipse.Effect>
        </Ellipse>
        
        <TextBlock Text="ðŸŽ¤" 
                   FontSize="20"
                   HorizontalAlignment="Center"
                   VerticalAlignment="Center"
                   Foreground="White"
                   x:Name="MicrophoneIcon"
                   RenderTransformOrigin="0.5,0.5"
                   IsHitTestVisible="False">
            <TextBlock.RenderTransform>
                <TransformGroup>
                    <ScaleTransform x:Name="IconScaleTransform"/>
                    <RotateTransform x:Name="IconRotateTransform"/>
                </TransformGroup>
            </TextBlock.RenderTransform>
        </TextBlock>
        
        <TextBlock Text="Ready" 
                   FontSize="8"
                   HorizontalAlignment="Center"
                   VerticalAlignment="Bottom"
                   Margin="0,0,0,5"
                   Foreground="White"
                   FontWeight="Normal"
                   x:Name="StatusText"
                   IsHitTestVisible="False"/>
    </Grid>
</Window>